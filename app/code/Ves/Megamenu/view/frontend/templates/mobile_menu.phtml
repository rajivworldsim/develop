<?php
/**
 * Venustheme
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Venustheme.com license that is
 * available through the world-wide-web at this URL:
 * https://venustheme.com/terms
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this extension to newer
 * version in the future.
 *
 * @category   venustheme
 * @package    Ves_Megamenu
 * @copyright  Copyright (c) 2021 venustheme (https://www.venustheme.com/)
 * @license    https://venustheme.com/terms
 */

// phpcs:disable Magento2.Templates.ThisInTemplate
// phpcs:disable Magento2.Security.XssTemplate.FoundUnescaped
// phpcs:disable Generic.Files.LineLength.TooLong
/**
 * @var $block \Ves\MegaMenu\Block\MobileMenu
 */
?>
<?php
if($menu = $this->getMenu()) :
	$data = $this->helper(\Ves\Megamenu\Helper\Data::class);
	$menuItems = $menu->getData('menuItems');
	$structure = json_decode($menu->getStructure(), true);
	$html = '';
	if (is_array($structure)) {
		foreach ($structure as $k => $v) {
			$itemData = $data->renderMenuItemData($v, [], $menuItems);
			$html .= $data->drawItem($itemData);
		}
	}
	$html = $data->filter($html);
	echo $html;
endif;
?>
